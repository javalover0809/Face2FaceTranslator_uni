{"version":3,"sources":["uni-app:///main.js","webpack:////Users/Oraida/Documents/HBuilderProjects/Face2FaceTranslator_uni/pages/index/index.vue?44cc","webpack:////Users/Oraida/Documents/HBuilderProjects/Face2FaceTranslator_uni/pages/index/index.vue?7170","webpack:////Users/Oraida/Documents/HBuilderProjects/Face2FaceTranslator_uni/pages/index/index.vue?db24","webpack:////Users/Oraida/Documents/HBuilderProjects/Face2FaceTranslator_uni/pages/index/index.vue?7044","uni-app:///pages/index/index.vue","webpack:////Users/Oraida/Documents/HBuilderProjects/Face2FaceTranslator_uni/pages/index/index.vue?3b4c","webpack:////Users/Oraida/Documents/HBuilderProjects/Face2FaceTranslator_uni/pages/index/index.vue?a84d"],"names":["createPage","Page"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n<!--index.wxml-->\n<view class=\"container\">\n  <scroll-view id=\"scroll-content\" :scroll-top=\"scroll_top\" scroll-y=\"true\" class=\"dialog-part\" :scroll-into-view=\"'translate-' + toView\" enable-back-to-top=\"true\" scroll-with-animation=\"true\">\n    <view class=\"dialog-wrap\" id=\"translate-empty\" v-if=\"!recording && dialogList.length == 0\">\n      <result-bubble :item=\"initTranslate\" record-status=\"0\"></result-bubble>\n    </view>\n    <view v-for=\"(item, index) in dialogList\" :key=\"index\" class=\"dialog-wrap\" :data-index=\"index\" catchmodaldelete=\"deleteItem\">\n      <result-bubble :item=\"item\" :edit-show=\"index==dialogList.length-1\" :index=\"index\" :current-translate-voice=\"currentTranslateVoice\" @translate=\"translateTextAction\" @expired=\"expiredAction\"></result-bubble>\n    </view>\n    <view class=\"dialog-wrap\" id=\"translate-recording\" v-if=\"recording\">\n      <result-bubble :item=\"currentTranslate\" :record-status=\"recordStatus\"></result-bubble>\n    </view>\n    <view id=\"translate-fake\"></view>\n\n  </scroll-view>\n\n  <!-- <view class=\"foot-group\" catchlongpress=\"catchTapEvent\"> -->\n  <view class=\"foot-group\" v-on:click=\"catchTapEvent\">\n    <bottom-button :button-disabled=\"bottomButtonDisabled\" @recordstart=\"streamRecord\" @recordend=\"streamRecordEnd\"></bottom-button>\n  </view>\n</view>\r\n</template>\r\n\r\n<script>\r\n/*\nTencent is pleased to support the open source community by making Face-2-Face Translator available.\n\nCopyright (C) 2018 THL A29 Limited, a Tencent company. All rights reserved.\n\nLicensed under the MIT License (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at\nhttp://opensource.org/licenses/MIT\n\nUnless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n*/\nconst app = getApp();\r\nconst util = require(\"../../utils/util.js\");\r\nconst plugin = requirePlugin(\"WechatSI\");\r\nimport { language } from \"../../utils/conf\"; // 获取**全局唯一**的语音识别管理器**recordRecoManager**\r\n// 获取**全局唯一**的语音识别管理器**recordRecoManager**\nconst manager = plugin.getRecordRecognitionManager();\r\nimport bottomButton from \"../../components/bottom-button/index\";\r\nimport resultBubble from \"../../components/result-bubble/index\";\r\n\r\nexport default {\n  data() {\n    return {\n      dialogList: [],\n      scroll_top: 10000,\n      // 竖向滚动条位置\n      bottomButtonDisabled: false,\n      // 底部按钮disabled\n      tips_language: language[0],\n      // 目前只有中文\n      initTranslate: {\n        // 为空时的卡片内容\n        create: '04/27 15:37',\n        text: '等待说话'\n      },\n      currentTranslate: {\n        // 当前语音输入内容\n        create: '04/27 15:37',\n        text: '等待说话'\n      },\n      recording: false,\n      // 正在录音\n      recordStatus: 0,\n      // 状态： 0 - 录音中 1- 翻译中 2 - 翻译完成/二次翻译\n      toView: 'fake',\n      // 滚动位置\n      lastId: -1,\n      // dialogList 最后一个item的 id\n      currentTranslateVoice: '' // 当前播放语音路径\n\n    };\n  },\n\n  components: {\n    bottomButton,\n    resultBubble\n  },\n  props: {},\n  onShow: function () {\n    this.scrollToNew();\n    this.initCard();\n\n    if (this.recordStatus == 2) {\n      uni.showLoading({\n        // title: '',\n        mask: true\n      });\n    }\n  },\n  onLoad: function () {\n    this.getHistory();\n    this.initRecord();\n    this.setData({\n      toView: this.toView\n    });\n    app.globalData.getRecordAuth();\n  },\n  onHide: function () {\n    this.setHistory();\n  },\n  methods: {\n\tcatchTapEvent(){\n\t\t\tconsole.log('my press')\n\t\t\n\t},  \n\t  \n\t  \n    /**\n     * 按住按钮开始语音识别\n     */\n    streamRecord: function (e) {\n      // console.log(\"streamrecord\" ,e)\n      let detail = e.detail || {};\n      let buttonItem = detail.buttonItem || {};\n      manager.start({\n        lang: buttonItem.lang\n      });\n      this.setData({\n        recordStatus: 0,\n        recording: true,\n        currentTranslate: {\n          // 当前语音输入内容\n          create: util.recordTime(new Date()),\n          text: '正在聆听中',\n          lfrom: buttonItem.lang,\n          lto: buttonItem.lto\n        }\n      });\n      this.scrollToNew();\n    },\n\n    /**\n     * 松开按钮结束语音识别\n     */\n    streamRecordEnd: function (e) {\n      // console.log(\"streamRecordEnd\" ,e)\n      let detail = e.detail || {}; // 自定义组件触发事件时提供的detail对象\n\n      let buttonItem = detail.buttonItem || {}; // 防止重复触发stop函数\n\n      if (!this.recording || this.recordStatus != 0) {\n        console.warn(\"has finished!\");\n        return;\n      }\n\n      manager.stop();\n      this.setData({\n        bottomButtonDisabled: true\n      });\n    },\n\n    /**\n     * 翻译\n     */\n    translateText: function (item, index) {\n      let lfrom = item.lfrom || 'zh_CN';\n      let lto = item.lto || 'en_US';\n      plugin.translate({\n        lfrom: lfrom,\n        lto: lto,\n        content: item.text,\n        tts: true,\n        success: resTrans => {\n          let passRetcode = [0, // 翻译合成成功\n          -10006, // 翻译成功，合成失败\n          -10007, // 翻译成功，传入了不支持的语音合成语言\n          -10008 // 翻译成功，语音合成达到频率限制\n          ];\n\n          if (passRetcode.indexOf(resTrans.retcode) >= 0) {\n            let tmpDialogList = this.dialogList.slice(0);\n\n            if (!isNaN(index)) {\n              let tmpTranslate = Object.assign({}, item, {\n                autoPlay: true,\n                // 自动播放背景音乐\n                translateText: resTrans.result,\n                translateVoicePath: resTrans.filename || \"\",\n                translateVoiceExpiredTime: resTrans.expired_time || 0\n              });\n              tmpDialogList[index] = tmpTranslate;\n              this.setData({\n                dialogList: tmpDialogList,\n                bottomButtonDisabled: false,\n                recording: false\n              });\n              this.scrollToNew();\n            } else {\n              console.error(\"index error\", resTrans, item);\n            }\n          } else {\n            console.warn(\"翻译失败\", resTrans, item);\n          }\n        },\n        fail: function (resTrans) {\n          console.error(\"调用失败\", resTrans, item);\n          this.setData({\n            bottomButtonDisabled: false,\n            recording: false\n          });\n        },\n        complete: resTrans => {\n          this.setData({\n            recordStatus: 1\n          });\n          uni.hideLoading();\n        }\n      });\n    },\n\n    /**\n     * 修改文本信息之后触发翻译操作\n     */\n    translateTextAction: function (e) {\n      // console.log(\"translateTextAction\" ,e)\n      let detail = e.detail; // 自定义组件触发事件时提供的detail对象\n\n      let item = detail.item;\n      let index = detail.index;\n      this.translateText(item, index);\n    },\n\n    /**\n     * 语音文件过期，重新合成语音文件\n     */\n    expiredAction: function (e) {\n      let detail = e.detail || {}; // 自定义组件触发事件时提供的detail对象\n\n      let item = detail.item || {};\n      let index = detail.index;\n\n      if (isNaN(index) || index < 0) {\n        return;\n      }\n\n      let lto = item.lto || 'en_US';\n      plugin.textToSpeech({\n        lang: lto,\n        content: item.translateText,\n        success: resTrans => {\n          if (resTrans.retcode == 0) {\n            let tmpDialogList = this.dialogList.slice(0);\n            let tmpTranslate = Object.assign({}, item, {\n              autoPlay: true,\n              // 自动播放背景音乐\n              translateVoicePath: resTrans.filename,\n              translateVoiceExpiredTime: resTrans.expired_time || 0\n            });\n            tmpDialogList[index] = tmpTranslate;\n            this.setData({\n              dialogList: tmpDialogList\n            });\n          } else {\n            console.warn(\"语音合成失败\", resTrans, item);\n          }\n        },\n        fail: function (resTrans) {\n          console.warn(\"语音合成失败\", resTrans, item);\n        }\n      });\n    },\n\n    /**\n     * 初始化为空时的卡片\n     */\n    initCard: function () {\n      let initTranslateNew = Object.assign({}, this.initTranslate, {\n        create: util.recordTime(new Date())\n      });\n      this.setData({\n        initTranslate: initTranslateNew\n      });\n    },\n\n    /**\n     * 删除卡片\n     */\n    deleteItem: function (e) {\n      // console.log(\"deleteItem\" ,e)\n      let detail = e.detail;\n      let item = detail.item;\n      let tmpDialogList = this.dialogList.slice(0);\n      let arrIndex = detail.index;\n      tmpDialogList.splice(arrIndex, 1); // 不使用setTImeout可能会触发 Error: Expect END descriptor with depth 0 but get another\n\n      setTimeout(() => {\n        this.setData({\n          dialogList: tmpDialogList\n        });\n\n        if (tmpDialogList.length == 0) {\n          this.initCard();\n        }\n      }, 0);\n    },\n\n    /**\n     * 识别内容为空时的反馈\n     */\n    showRecordEmptyTip: function () {\n      this.setData({\n        recording: false,\n        bottomButtonDisabled: false\n      });\n      uni.showToast({\n        title: this.tips_language.recognize_nothing,\n        icon: 'success',\n        image: \"/static/image/no_voice.png\",\n        duration: 1000,\n        success: function (res) {},\n        fail: function (res) {\n          console.log(res);\n        }\n      });\n    },\n\n    /**\n     * 初始化语音识别回调\n     * 绑定语音播放开始事件\n     */\n    initRecord: function () {\n      //有新的识别内容返回，则会调用此事件\n      manager.onRecognize = res => {\n        let currentData = Object.assign({}, this.currentTranslate, {\n          text: res.result\n        });\n        this.setData({\n          currentTranslate: currentData\n        });\n        this.scrollToNew();\n      }; // 识别结束事件\n\n\n      manager.onStop = res => {\n        let text = res.result;\n\n        if (text == '') {\n          this.showRecordEmptyTip();\n          return;\n        }\n\n        let lastId = this.lastId + 1;\n        let currentData = Object.assign({}, this.currentTranslate, {\n          text: res.result,\n          translateText: '正在翻译中',\n          id: lastId,\n          voicePath: res.tempFilePath\n        });\n        this.setData({\n          currentTranslate: currentData,\n          recordStatus: 1,\n          lastId: lastId\n        });\n        this.scrollToNew();\n        this.translateText(currentData, this.dialogList.length);\n      }; // 识别错误事件\n\n\n      manager.onError = res => {\n        this.setData({\n          recording: false,\n          bottomButtonDisabled: false\n        });\n      }; // 语音播放开始事件\n\n\n      uni.onBackgroundAudioPlay(res => {\n        const backgroundAudioManager = uni.getBackgroundAudioManager();\n        let src = backgroundAudioManager.src;\n        this.setData({\n          currentTranslateVoice: src\n        });\n      });\n    },\n\n    /**\n     * 设置语音识别历史记录\n     */\n    setHistory: function () {\n      try {\n        let dialogList = this.dialogList;\n        dialogList.forEach(item => {\n          item.autoPlay = false;\n        });\n        uni.setStorageSync('history', dialogList);\n      } catch (e) {\n        console.error(\"setStorageSync setHistory failed\");\n      }\n    },\n\n    /**\n     * 得到历史记录\n     */\n    getHistory: function () {\n      try {\n        let history = uni.getStorageSync('history');\n\n        if (history) {\n          let len = history.length;\n          let lastId = this.lastId;\n\n          if (len > 0) {\n            lastId = history[len - 1].id || -1;\n          }\n\n          this.setData({\n            dialogList: history,\n            toView: this.toView,\n            lastId: lastId\n          });\n        }\n      } catch (e) {\n        // Do something when catch error\n        this.setData({\n          dialogList: []\n        });\n      }\n    },\n\n    /**\n     * 重新滚动到底部\n     */\n    scrollToNew: function () {\n      this.setData({\n        toView: this.toView\n      });\n    }\n  }\n};\r\n</script>\r\n<style>\r\n@import \"./index.css\";\r\n</style>","import mod from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1611384270198\n      var cssReload = require(\"/Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}