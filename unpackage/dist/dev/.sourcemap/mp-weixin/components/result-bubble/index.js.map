{"version":3,"sources":["webpack:////Users/Oraida/Documents/HBuilderProjects/Face2FaceTranslator_uni/components/result-bubble/index.vue?f397","webpack:////Users/Oraida/Documents/HBuilderProjects/Face2FaceTranslator_uni/components/result-bubble/index.vue?7d73","webpack:////Users/Oraida/Documents/HBuilderProjects/Face2FaceTranslator_uni/components/result-bubble/index.vue?db12","webpack:////Users/Oraida/Documents/HBuilderProjects/Face2FaceTranslator_uni/components/result-bubble/index.vue?cd35","uni-app:///components/result-bubble/index.vue","webpack:////Users/Oraida/Documents/HBuilderProjects/Face2FaceTranslator_uni/components/result-bubble/index.vue?8023","webpack:////Users/Oraida/Documents/HBuilderProjects/Face2FaceTranslator_uni/components/result-bubble/index.vue?cdfa"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACsN;AACtN,gBAAgB,uNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAi2B,CAAgB,i0BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyCr3B,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAVA;;;;;;;;;23BAeA,EACA,IADA,kBACA,CACA,SACA,gCADA,EAEA;AACA,sBAHA,EAIA;AACA,sBALA,EAMA;AACA,2BAPA,EAQA,uBARA,EASA,wCATA,GAWA,CAbA,EAeA,cACA,YADA,EAEA,wBAFA,EAGA,kBAHA,EAfA,EAoBA,SACA;;;;;;;;;6LAUA,QACA,YADA,EAEA,yCAFA,EAXA,EAeA,YACA,aADA,EAEA,cAFA,EAfA,EAmBA,SACA,YADA,EAnBA,EAsBA,yBACA,YADA,EAtBA,EAyBA,gBACA,YADA;AAEA,gBAFA,CAEA;AAFA,KAzBA,EApBA;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCADA;AAEA,oCAFA,EADA;;;AAMA,SATA,CASA;;;AAGA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OAlBA;AAmBA,qBAnBA;AAoBA,gBApBA,EADA;;AAuBA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA,qBANA,EAvBA,EAnDA;;;AAmFA;AACA;AACA;AACA;AACA,GAvFA;AAwFA;AACA;AACA,GA1FA;AA2FA;AACA;;;AAGA;AACA;AACA,uBADA;;AAGA,KARA;;AAUA;;;AAGA;AACA;AACA,wBADA;;AAGA,KAjBA;;AAmBA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA,OAFA,MAEA;AACA;AACA,6BADA;;AAGA;AACA;AACA,gCADA;AAEA,kCAFA,EADA;;;AAMA;AACA,KA1CA;;AA4CA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAHA;AAIA;AACA;AACA,0BADA;AAEA,iBAFA;AAGA;AACA;AACA,SALA;AAMA;AACA;AACA;AACA;AACA,SAVA;AAWA;AACA;AACA,SAbA;;AAeA,KA3EA;;AA6EA;;;AAGA;AACA;AACA,2BADA;;AAGA,KApFA;;AAsFA;;;AAGA;AACA;AACA,wBADA;;AAGA,KA7FA,EA3FA,E;;;;;;;;;;;;;AC9CA;AAAA;AAAA;AAAA;AAA0tC,CAAgB,0oCAAG,EAAC,C;;;;;;;;;;;ACA9uC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/result-bubble/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=568eba58&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/result-bubble/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=568eba58&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n<view class=\"bubble-wrap\" @longpress=\"showModal\">\n  <view class=\"modal-wrap\" v-if=\"recordStatus == 2\">\n    <modal :modal-show=\"modalShow\" :index=\"index\" :item=\"item\" @modalleave=\"modalLeave\"></modal>\n  </view>\n\n  <view class=\"create-time\">{{item.create}}</view>\n  <view class=\"section-body\" :data-index=\"index\">\n    <view class=\"send-message\">\n      <view :data-id=\"item.id\" class=\"text-content\" :data-index=\"index\">\n        <view :class=\"'text-detail  text-detail-' + item.lfrom\">{{item.text}}<waiting-icon v-if=\"recordStatus == 0\"></waiting-icon></view>\n      </view>\n      <navigator hover-class=\"navigator-hover\" :data-text=\"item.text\" :data-id=\"item.id\" :data-index=\"index\" class=\"edit-icon\" v-if=\"editShow\" :data-item=\"item\" :url=\"'/pages/edit/edit?content='+item.text+'&index='+index\">\n          <image class=\"edit-icon-img\" :src=\"edit_icon_path\"></image>\n      </navigator>\n    </view>\n    <view class=\"line-between\" v-if=\"recordStatus > 0\"></view>\n    <view class=\"translate-message\">\n      <view class=\"text-content\">\n        <view :class=\"'text-detail text-detail-' + item.lto\">{{item.translateText}}<waiting-icon v-if=\"recordStatus == 1\"></waiting-icon>\n      </view>\n      </view>\n      <view class=\"play-icon\" @tap.stop=\"playTranslateVoice\" catchtouchstart=\"playTranslateVoice\" v-if=\"recordStatus == 2\">\n        <play-icon :play-type=\"playType\"></play-icon>\n      </view>\n    </view>\n  </view>\n</view>\r\n</template>\r\n\r\n<script>\r\n/*\nTencent is pleased to support the open source community by making Face-2-Face Translator available.\n\nCopyright (C) 2018 THL A29 Limited, a Tencent company. All rights reserved.\n\nLicensed under the MIT License (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at\nhttp://opensource.org/licenses/MIT\n\nUnless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n*/\nimport { language } from \"../../utils/conf\";\r\nimport modal from \"../modal/index\";\r\nimport waitingIcon from \"../waiting-icon/index\";\r\nimport playIcon from \"../play-icon/index\";\r\n\r\nexport default {\n  data() {\n    return {\n      tips_language: language[0],\n      // 目前只有中文\n      modalShow: false,\n      // 展示悬浮框\n      playType: 'wait',\n      // 语音播放状态\n      waiting_animation: {},\n      waiting_animation_1: {},\n      edit_icon_path: \"/static/image/edit.png\"\n    };\n  },\n\n  components: {\n    modal,\n    waitingIcon,\n    playIcon\n  },\n  props: {\n    /*\n    item 格式\n    {\n      create: '04/27 15:37',\n      text: '一二三四五',\n      translateText: '12345',\n      voicePath: '',\n      translateVoicePath: '',\n      id: 0,\n    },*/\n    item: {\n      type: Object,\n      default: () => ({})\n    },\n    editShow: {\n      type: Boolean,\n      default: false\n    },\n    index: {\n      type: Number\n    },\n    currentTranslateVoice: {\n      type: String\n    },\n    recordStatus: {\n      type: Number,\n      default: 2 // 0：正在识别，1：正在翻译，2：翻译完成\n\n    }\n  },\n  watch: {\n    item: {\n      handler: function (newVal, oldVal) {\n        // 翻译完成后，文字有改变触发重新翻译\n        if (this.recordStatus == 2 && oldVal.text && oldVal.text != '' && newVal.text != oldVal.text) {\n          this.$emit('translate', {\n            detail: {\n              item: this.data.item,\n              index: this.data.index\n            }\n          });\n        } // 翻译内容改变触发播放\n\n\n        if (newVal.autoPlay && newVal.translateVoicePath != oldVal.translateVoicePath) {\n          this.autoPlayTranslateVoice();\n        } else if (newVal.translateVoicePath == \"\") {\n          this.playAnimationEnd();\n        }\n      },\n      immediate: true,\n      deep: true\n    },\n    currentTranslateVoice: {\n      handler: function (newVal, oldVal) {\n        if (newVal != '' && newVal != this.item.translateVoicePath) {\n          this.playAnimationEnd();\n        }\n      },\n      immediate: true\n    }\n  },\n  mounted: function () {\n    if (this.item.autoPlay) {\n      this.autoPlayTranslateVoice();\n    }\n  },\n  // 组件生命周期函数，在组件实例被从页面节点树移除时执行\n  destroyed: function () {// console.log(\"detach\")\n  },\n  methods: {\n    /**\n     * 显示悬浮框\n     */\n    showModal: function () {\n      this.setData({\n        modalShow: true\n      });\n    },\n\n    /**\n     * 离开悬浮框\n     */\n    modalLeave: function () {\n      this.setData({\n        modalShow: false\n      });\n    },\n\n    /**\n     * 点击播放图标\n     */\n    playTranslateVoice: function () {\n      let nowTime = parseInt(+new Date() / 1000);\n      let voiceExpiredTime = this.item.translateVoiceExpiredTime || 0;\n\n      if (this.playType == 'playing') {\n        uni.stopBackgroundAudio();\n        this.playAnimationEnd();\n      } else if (nowTime < voiceExpiredTime) {\n        this.autoPlayTranslateVoice();\n      } else {\n        this.setData({\n          playType: 'loading'\n        });\n        this.$emit('expired', {\n          detail: {\n            item: this.data.item,\n            index: this.data.index\n          }\n        });\n      }\n    },\n\n    /**\n     * 播放背景音乐\n     */\n    autoPlayTranslateVoice: function (path, index) {\n      let play_path = this.item.translateVoicePath;\n\n      if (!play_path) {\n        console.warn(\"no translate voice path\");\n        return;\n      }\n\n      uni.onBackgroundAudioStop(res => {\n        console.log(\"play voice end\", res);\n        this.playAnimationEnd();\n      });\n      this.playAnimationStart();\n      uni.playBackgroundAudio({\n        dataUrl: play_path,\n        title: '',\n        success: res => {\n          this.playAnimationStart();\n        },\n        fail: res => {\n          // fail\n          console.log(\"failed played\", play_path);\n          this.playAnimationEnd();\n        },\n        complete: function (res) {\n          console.log(\"complete played\");\n        }\n      });\n    },\n\n    /**\n     * 开始播放\n     */\n    playAnimationStart: function () {\n      this.setData({\n        playType: 'playing'\n      });\n    },\n\n    /**\n     * 结束播放\n     */\n    playAnimationEnd: function () {\n      this.setData({\n        playType: 'wait'\n      });\n    }\n  }\n};\r\n</script>\r\n<style>\r\n@import \"./index.css\";\r\n</style>","import mod from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1611384270244\n      var cssReload = require(\"/Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}